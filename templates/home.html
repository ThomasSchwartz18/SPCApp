{% extends 'base.html' %}
{% block title %}SPCApp Home{% endblock %}
{% block head_extra %}
  <script src="{{ url_for('static', filename='js/tabs.js') }}" defer></script>
{% endblock %}
{% block content %}
  <div class="home-title">
    <img src="/static/images/image.png" alt="Spectra Tech Logo">
    <!-- <h1>HUB</h1> -->
  </div>
  <!-- <button onclick="location.href='{{ url_for('logout') }}'">Logout</button> -->
  {#
  <div class="job-previews">
    <h2>Floor Jobs Preview</h2>
    <div class="job-grid">
      {% for job in sample_jobs %}
        <div class="job-preview {{ job.highlight }}">
          <strong>{{ job.job }} â€“ due {{ job.due_date }} ({{ job.due_in }})</strong>
          <ul>
            {% for loc, count in job.locations %}
              <li>{{ loc }}....{{ count }}</li>
            {% endfor %}
            <li>Total: {{ job.total }}</li>
          </ul>
        </div>
      {% endfor %}
    </div>
  </div>
  #}
  <p>Select a section below:</p>

  <nav class="tab-nav">
    {% if is_admin or permissions.get('analysis') or permissions.get('aoi') %}
    <button class="tab-link active" data-tab="analysis-tab" data-desc="Upload and explore reports for data insights.">Analysis</button>
    {% endif %}
    <button class="tab-link{% if not (is_admin or permissions.get('analysis') or permissions.get('aoi')) %} active{% endif %}" data-tab="tools-tab" data-desc="Utilities such as rework lookup and verified part markings.">Tools</button>
    <button class="tab-link" data-tab="production-tab" data-desc="Dashboards and job management features.">Production</button>
  </nav>

  {% if is_admin or permissions.get('analysis') or permissions.get('aoi') %}
  <div id="analysis-tab" class="tab-content active">
    <div class="home-row">
      <div class="widget-row">
        {% if is_admin or permissions.get('analysis') %}
        <div class="widget" onclick="location.href='/analysis'">
          <h2>Data Analysis</h2>
          <p>Upload And Data Mine Reports From SPC</p>
        </div>
        {% endif %}
        {% if is_admin or permissions.get('aoi') %}
        <div class="widget" onclick="location.href='/aoi'">
          <h2>AOI Daily Report</h2>
          <p>View and Upload AOI Reports With Data Insights.</p>
        </div>
        <div class="widget" onclick="location.href='/final-inspect'">
          <h2>Final Inspect Daily Report</h2>
          <p>View and Upload Final Inspection Reports With Data Insights.</p>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
  {% endif %}

  <div id="tools-tab" class="tab-content{% if not (is_admin or permissions.get('analysis') or permissions.get('aoi')) %} active{% endif %}">
    <div class="home-row">
      <div class="widget-row">
        <div class="widget" onclick="location.href='/rework'">
          <h2>Rework</h2>
          <p>Stencil and part lookup tools</p>
        </div>
        {% if is_admin or permissions.get('part_markings') %}
        <div class="widget" onclick="location.href='/part-markings'">
          <h2>Verified Part Markings</h2>
          <p>Lookup Part Numbers To Find Their Verified Part Markings</p>
        </div>
        {% endif %}
      </div>
    </div>
  </div>

  <div id="production-tab" class="tab-content">
    <div class="home-row">
      <div class="widget-row">
        {% if is_admin or permissions.get('dashboard') %}
        <div class="widget" onclick="location.href='#'">
          <h2>SPC Dashboard</h2>
          <p>Statistical Controls (<i>in progress</i>)</p>
        </div>
        {% endif %}
        <div class="widget" onclick="location.href='/jobs'">
          <h2>Jobs</h2>
          <p>Manage Floor Jobs (<i>in progress</i>)</p>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
