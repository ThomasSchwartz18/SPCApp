{% extends 'base.html' %}
{% block title %}AOI Operator Report{% endblock %}
{% block head_extra %}
  <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
  <script src="{{ url_for('static', filename='js/html2canvas.min.js') }}" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.plugin.png.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.plugin.jpeg.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.5.25/dist/jspdf.plugin.autotable.min.js" defer></script>
  <script src="{{ url_for('static', filename='js/aoi_operator_report.js') }}" defer></script>
{% endblock %}
{% block content %}
  <h1>AOI Operator Report</h1>
  <div id="controls">
    <label for="start-date">Start Date</label>
    <input type="date" id="start-date">
    <label for="end-date">End Date</label>
    <input type="date" id="end-date">
    <button id="load-report">Load Report</button>
    <button id="export-pdf">Export PDF</button>
  </div>
  <div id="report">
    <div id="cover">
      <img src="{{ url_for('static', filename='images/company-logo.png') }}" alt="Company Logo" id="company-logo">
      <h2>AOI Operator Report</h2>
    </div>
    <nav id="toc">
      <h2>Table of Contents</h2>
      <ul>
        <li><a href="#summary">Summary</a></li>
        <li><a href="#operator-performance">Operator Performance</a></li>
      </ul>
    </nav>
    <section id="summary">
      <h2>Summary</h2>
      <p>Total Inspected: <span id="total-boards"></span></p>
      <p>Total Rejected: <span id="total-rejected"></span></p>
      <p>Overall Yield: <span id="overall-yield"></span></p>
    </section>
    <section id="operator-performance">
      <h2>Operator Performance</h2>
      <canvas id="operatorsCanvas"></canvas>
      <table id="operatorsTable">
        <thead>
          <tr>
            <th>Operator</th>
            <th>Inspected</th>
            <th>Rejected</th>
            <th>Yield</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
    <footer id="report-footer">
      <p>Generated by SPCApp</p>
    </footer>
  </div>
{% endblock %}
